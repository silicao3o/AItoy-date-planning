# π¤– AI Date Planner Agent

AI κΈ°λ°μΌλ΅ μ„μΈμ ν•«ν”λ μ΄μ¤ λ°μ΄νΈ/λ†€κ±°λ¦¬ μ½”μ¤λ¥Ό μλ™μΌλ΅ κ³„νν•΄μ£Όλ” μ—μ΄μ „νΈμ…λ‹λ‹¤.
μ‚¬μ©μμ μλ„λ¥Ό νμ•…ν•κ³ (μ§€μ—­ vs νΉμ • μ¥μ†), λ¶€μ΅±ν• μ •λ³΄λ” μ§λ¬Έ(HIL)μ„ ν†µν•΄ λ³΄μ™„ν•λ©° μµμ μ μ½”μ¤λ¥Ό μ μ•ν•©λ‹λ‹¤.

## β¨ μ£Όμ” κΈ°λ¥

- **μμ—°μ–΄ μ…λ ¥ λ¶„μ„**: "ν™λ€" κ°™μ€ μ§€μ—­λ…κ³Ό "λ΅―λ°μ›”λ“" κ°™μ€ νΉμ • μ¥μ†λ¥Ό κµ¬λ¶„ν•μ—¬ μ²λ¦¬ν•©λ‹λ‹¤.
- **Human-In-The-Loop (HIL)**:
  - **λ†€κ±°λ¦¬ μ·¨ν–¥**: μ „μ‹, μ΄μƒ‰μ²΄ν—, νλ§ λ“± μ„ νΈν•λ” λ†€κ±°λ¦¬ μ¤νƒ€μΌμ„ λ¬Όμ–΄λ΄…λ‹λ‹¤.
  - **μμ‹ μ·¨ν–¥**: μ–‘μ‹, ν•μ‹, μΌμ‹ λ“± μ„ νΈν•λ” μμ‹ μΆ…λ¥λ¥Ό λ¬Όμ–΄λ³΄κ³  λ°μν•©λ‹λ‹¤.
  - **μ¥μ† ν™•μΈ**: μ…λ ¥ν• μ¥μ†κ°€ λ¨νΈν•  κ²½μ° λ‹¤μ‹ ν™•μΈν•©λ‹λ‹¤.
- **λ™μ„  κΈ°λ° μ½”μ¤ μ¶”μ²**: λ†€κ±°λ¦¬ -> μ‹μ‚¬ -> μΉ΄ν -> μ μ§‘ μμ„μ μμ—°μ¤λ¬μ΄ μ½”μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
- **Kakao Map μ—°λ™**: μ‹¤μ  μ„μΉ κΈ°λ°μΌλ΅ μ£Όλ³€ μ¥μ†λ¥Ό κ²€μƒ‰ν•©λ‹λ‹¤.

## π› οΈ μ‚¬μ „ μ”κµ¬μ‚¬ν•­

- **Python 3.12+**
- **LLM (νƒ 1)**:
  - **[Ollama](https://ollama.com/)** (λ΅μ»¬ μ‹¤ν–‰): `llama3.2` λ¨λΈ μ„¤μΉ ν•„μ” (`ollama pull llama3.2`)
  - **OpenAI API** (ν΄λΌμ°λ“ μ‹¤ν–‰): `OPENAI_API_KEY` λ°κΈ‰ ν•„μ”. `agent.py`μ—μ„ λ¨λΈ λ³€κ²½ κ°€λ¥.
- **Kakao Developers API Key**: λ΅μ»¬ κ²€μƒ‰ API μ‚¬μ©μ„ μ„ν•΄ ν•„μ”ν•©λ‹λ‹¤.

## π€ μ„¤μΉ λ° μ‹¤ν–‰ λ°©λ²• (uv μ‚¬μ©)

μ΄ ν”„λ΅μ νΈλ” [uv](https://github.com/astral-sh/uv)λ¥Ό μ‚¬μ©ν•μ—¬ ν¨ν‚¤μ§€λ¥Ό κ΄€λ¦¬ν•©λ‹λ‹¤.

### 1. ν”„λ΅μ νΈ ν΄λ΅  λ° μ΄λ™
```bash
git clone <repository-url>
cd AItoy-date-planning
```

### 2. κ°€μƒν™κ²½ μƒμ„± λ° μμ΅΄μ„± μ„¤μΉ
```bash
# μμ΅΄μ„± λ™κΈ°ν™” (κ°€μƒν™κ²½ μλ™ μƒμ„± λ° ν¨ν‚¤μ§€ μ„¤μΉ)
uv sync

# κ°€μƒν™κ²½ ν™μ„±ν™” (macOS/Linux)
source .venv/bin/activate
```

**μ°Έκ³  (μλ™ μ„¤μΉ μ‹):**
```bash
uv pip install -e .
```

### 3. ν™κ²½ λ³€μ μ„¤μ •
`.env` νμΌμ„ μƒμ„±ν•κ³  λ‹¤μ μ •λ³΄λ¥Ό μ…λ ¥ν•μ„Έμ”.
```env
KAKAO_REST_API_KEY=your_kakao_api_key_here

# OpenAI μ‚¬μ© μ‹ (μ„ νƒ)
OPENAI_API_KEY=your_openai_api_key_here
# μ‚¬μ©ν•  λ¨λΈ λ³€κ²½μ€ src/agent.pyμ—μ„ κ°€λ¥ν•©λ‹λ‹¤.

# LangSmith μ¶”μ  (μ„ νƒ)
# LANGCHAIN_API_KEY=... 
# LANGCHAIN_TRACING_V2=true
```

### 4. Ollama μ‹¤ν–‰
ν„°λ―Έλ„μ—μ„ Ollama μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μ΄μ–΄μ•Ό ν•©λ‹λ‹¤.
```bash
ollama serve
# λ³„λ„ ν„°λ―Έλ„μ—μ„ λ¨λΈ ν™•μΈ
ollama list
```

### 5. μ„λ²„ μ‹¤ν–‰
FastAPI μ„λ²„λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
```bash
uvicorn src.server:app --reload --port 8000
```

## π§ ν…μ¤νΈ λ°©λ²•

### API μ—”λ“ν¬μΈνΈ
- `POST /api/plan`: μ—¬ν–‰ κ³„ν μ”μ²­ μ‹μ‘
- `POST /api/feedback`: μ‚¬μ©μ ν”Όλ“λ°±(μ·¨ν–¥) μ „λ‹¬

### ν…μ¤νΈ μ¤ν¬λ¦½νΈ μ‹¤ν–‰
HIL μ‹λ‚λ¦¬μ¤λ¥Ό ν…μ¤νΈν•λ ¤λ©΄ λ³„λ„μ ν„°λ―Έλ„μ—μ„ λ‹¤μ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•μ„Έμ”.

```bash
# κΈ°λ³Έ HIL νλ¦„ (μ§€μ—­ κ²€μƒ‰ -> λ†€κ±°λ¦¬ μ·¨ν–¥ -> μμ‹ μ·¨ν–¥ -> κ²°κ³Ό)
python test_hil.py

# μ¥μ† λ¶λ…ν™• μ‹λ‚λ¦¬μ¤ (μλ»λ μ¥μ† -> μ¬ν™•μΈ -> μ§„ν–‰)
python test_hil_place.py
```

## π“‚ ν”„λ΅μ νΈ κµ¬μ΅°
```
.
β”β”€β”€ src/
β”‚   β”β”€β”€ agent.py        # LangGraph μ—μ΄μ „νΈ μ›ν¬ν”λ΅μ° μ •μ
β”‚   β”β”€β”€ kaako_client.py # μΉ΄μΉ΄μ¤λ§µ API ν΄λΌμ΄μ–ΈνΈ
β”‚   β”β”€β”€ models.py       # λ°μ΄ν„° λ¨λΈ (Pydantic, TypedDict)
β”‚   β”β”€β”€ server.py       # FastAPI μ„λ²„ μ§„μ…μ 
β”‚   β””β”€β”€ main.py         # (Optional) CLI μ‹¤ν–‰μ©
β”β”€β”€ test_hil.py         # HIL ν…μ¤νΈ μ¤ν¬λ¦½νΈ
β”β”€β”€ .env                # ν™κ²½ λ³€μ μ„¤μ •
β””β”€β”€ pyproject.toml      # ν”„λ΅μ νΈ μ„¤μ •
```
